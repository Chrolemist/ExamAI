<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ExamAI</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link rel="stylesheet" href="./styles.css?v=20250814-1" />
  </head>
  <body>
    <div id="app">
      <!-- Top app bar -->
      <header class="appbar">
        
      <!-- Center add-copilot button and global user name field -->
      <div style="display:flex;align-items:center;gap:10px;justify-content:center">
        <button id="addCopilotBtn" class="copilot-plus" title="Lägg till Copilot">+</button>
        <button id="pauseFlowBtn" class="btn" title="Pausa/återuppta konversationsflödet">Pausa flöde</button>
      </div>
          <div class="brand">
            <div class="logo" aria-hidden="true"></div>
            <span>Min lärbok</span>
          </div>
          <div class="search" role="search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.3-4.3M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="var(--subtle)" stroke-width="1.8" stroke-linecap="round"/></svg>
            <input id="q" type="search" placeholder="Sök i teori, exempel och övningar…" autocomplete="off" />
          </div>
      </header>
      <!-- Main content area -->
      <div class="layout">
        <main class="content">
  <section id="teori" class="panel board-section" data-section-key="teori" aria-label="Teori">
          <div class="head"><h2>Teori</h2></div>
          <div class="body">
            <div id="theoryGrid" class="grid"></div>
            <div class="note" id="theoryEmpty">Ingen teori ännu. Skapa eller ladda en exempeltenta.</div>
          </div>
        </section>
  <section id="exempel" class="panel board-section" data-section-key="exempel" aria-label="Exempel">
          <div class="head"><h2>Exempel</h2></div>
          <div class="body">
            <div id="examplesGrid" class="grid"></div>
            <div class="note" id="examplesEmpty">Inga exempel ännu. Skapa eller ladda en exempeltenta.</div>
          </div>
        </section>
  <section id="ovningar" class="panel board-section" data-section-key="ovningar" aria-label="Övningsuppgifter">
          <div class="head"><h2>Övningsuppgifter</h2></div>
          <div class="body">
            <div id="exerciseGrid" class="grid"></div>
            <div class="note" id="exerciseEmpty">Inga övningar ännu. Skapa eller ladda en exempeltenta.</div>
          </div>
        </section>
        </main>
      </div>

  <!-- Main copilot drawer removed: use + to add individual copilots -->
  <!-- Left menu panel removed -->

      <!-- Fullscreen modal for exam view -->
      <section id="examModal" class="modal hidden">
        <div class="modal-content">
          <header class="drawer-head"><div class="brand">Tenta</div><button id="examClose" class="icon-btn">✕</button></header>
          <div id="examViewer" class="exam"></div>
        </div>
      </section>

      <!-- Modal: Skapa tenta / välj filer -->
      <section id="filePickerModal" class="modal hidden">
        <div class="modal-content">
          <header class="drawer-head"><div class="brand">Skapa tenta</div><button id="filePickerClose" class="icon-btn">✕</button></header>
          <div class="exam" style="padding:14px">
            <div class="grid2">
              <div class="card">
                <div class="label">Föreläsningar (en eller flera)</div>
                <input id="filesLectures" type="file" accept=".pdf,.txt,.md" multiple />
                <div id="dzLectures" class="dropzone" aria-label="Dra & släpp föreläsningsfiler här">Dra & släpp här</div>
                <div id="listLectures" class="file-list"></div>
              </div>
              <div class="card">
                <div class="label">Tenta (en eller flera, kombineras)</div>
                <input id="filesExams" type="file" accept=".txt,.md,.text,.pdf" multiple />
                <div id="dzExams" class="dropzone" aria-label="Dra & släpp tentafiler här">Dra & släpp här</div>
                <div id="listExams" class="file-list"></div>
              </div>
            </div>
              <label for="examTitle" class="input-label">Titel (valfri)</label>
              <input id="examTitle" type="text" placeholder="Ange en titel på tentan" class="text-input"/>
            <div style="display:flex;justify-content:center;margin-top:14px">
              <button id="confirmBuildExam" class="btn btn-primary">Skapa tenta</button>
            </div>
            <div id="createExamResult" class="subtle" style="margin-top:8px"></div>
          </div>
        </div>
      </section>

      <!-- Modal: Ladda sparad tenta -->
      <section id="savedExamsModal" class="modal hidden">
        <div class="modal-content">
          <header class="drawer-head"><div class="brand">Sparade tentor</div><button id="savedExamsClose" class="icon-btn">✕</button></header>
          <div class="exam" style="padding:14px">
            <div id="savedExamsList" class="list"></div>
          </div>
        </div>
      </section>
    </div>

  <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.2/dist/markdown-it.min.js"></script>
  <script src="./app.js?v=20250815-11" type="module"></script>
  </body>
</html>
