<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Övningar – Fullskärm</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="alternate icon" href="../favicon.ico">
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* Use global background from styles.css; only scope page-specific layout */
  .fx-wrap { max-width: 1200px; margin: 0 auto; padding: 16px; }
  .fx-wrap.free { max-width: 100vw; margin: 0; padding-left: 0; padding-right: 0; }
  .fx-head { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; position:relative; }
      .fx-title { font-size: 20px; font-weight: 600; }
  .fx-center { position:absolute; left:50%; transform:translateX(-50%); display:flex; align-items:center; gap:12px; z-index:1; }
  .fx-counter { text-align:center; font-size: 24px; font-weight: 700; letter-spacing: 0.5px; color: var(--text); pointer-events:none; opacity:0.95; }
      .fx-controls { display:flex; gap:8px; align-items:center; }
  .fx-main { display:grid; grid-template-columns: 1fr 1.2fr 0.9fr; gap: 12px; min-height: 70vh; position:relative; }
  .fx-wrap.free .fx-main { display:block; min-height: calc(100vh - 120px); }
      .fx-card { background:linear-gradient(180deg,#121219,#0e0e14); border:1px solid #23232b; border-radius:10px; padding:12px; color:var(--text); }
      .fx-card[data-free="1"]{ position:absolute; }
      .fx-resize{ position:absolute; right:6px; bottom:6px; width:14px; height:14px; cursor:nwse-resize;
        background:linear-gradient(135deg,transparent 50%, rgba(124,92,255,.4) 50%); clip-path:polygon(0 100%, 100% 0, 100% 100%); opacity:.7 }
      .fx-resize:hover{ opacity:1 }
  /* Make question card a column so chat stays pinned at bottom */
  #cardQ { display:flex; flex-direction:column; min-height: 200px; }
  .fx-q { flex: 1 1 auto; min-height: 160px; white-space:pre-wrap; overflow:auto; }
  .fx-qchat { margin-top: 8px; display:flex; gap:6px; }
  .fx-a { width:100%; height:58vh; resize:vertical; color:var(--text); background:#0f0f14; border:1px solid #24242c; border-radius:10px; padding:10px; }
      .fx-a::placeholder{ color:#8f93a3 }
      .fx-fb { min-height: 120px; white-space:pre-wrap; }
      .fx-nav { display:flex; gap:8px; align-items:center; justify-content:flex-end; margin-top:12px; }
      .fx-meta { opacity:.8; font-size: 12px; }
      .btn { cursor: pointer; }
      .fx-empty { opacity:.8; padding:16px; text-align:center; }
      .drag-handle{ cursor:move; }
  /* Answer card footer action pinned at bottom of that card */
  #cardA { display:flex; flex-direction:column; }
  #cardA .fx-a { flex: 1 1 auto; resize: none; }
  #cardA .fx-actions { display:flex; justify-content:flex-end; gap:8px; margin-top:8px; padding-right:18px; }
    </style>
  </head>
  <body>
    <div class="fx-wrap">
      <header class="fx-head">
        <div class="fx-title" id="fxTitle">Övningar</div>
        <div class="fx-center">
          <button class="btn" id="fxPrev" aria-label="Föregående" title="Föregående">◀</button>
          <div class="fx-counter" id="fxInfoTop"></div>
          <button class="btn" id="fxNext" aria-label="Nästa" title="Nästa">▶</button>
        </div>
        <div class="fx-controls">
          <button class="btn btn-ghost" id="fxClearAns">Rensa alla svar</button>
          <button class="btn btn-ghost" id="fxLayout">Layoutläge</button>
          <button class="btn btn-ghost" id="fxClose">Stäng</button>
        </div>
      </header>
      <section class="fx-main" id="fxMain">
        <div class="fx-card" id="cardQ">
          <div class="fx-meta drag-handle" id="fxMetaQ">Fråga</div>
          <div class="fx-q" id="fxQ" spellcheck="false"></div>
          <div class="fx-qchat" style="display:flex; gap:6px; margin-top:8px;">
            <input id="fxQChat" class="input" placeholder="Fråga förbättraren… t.ex. förtydliga eller skapa ny fråga" style="flex:1; min-width:0;">
            <button class="btn" id="fxQSend" title="Skicka till förbättrare">Skicka</button>
          </div>
          <div class="loader-overlay" id="fxQLoad"><div class="spinner-rgb"></div></div>
          <div class="fx-resize" title="Ändra storlek"></div>
        </div>
        <div class="fx-card" id="cardA">
          <div class="fx-meta drag-handle" id="fxMetaA">Ditt svar</div>
          <textarea class="fx-a" id="fxA" placeholder="Skriv ditt svar..."></textarea>
          <div class="fx-actions"><button class="btn" id="fxGrade">Rätta</button></div>
          <div class="fx-resize" title="Ändra storlek"></div>
        </div>
        <div class="fx-card" id="cardF">
          <div class="fx-meta drag-handle" id="fxMetaF">Feedback</div>
          <div class="fx-fb" id="fxF" spellcheck="false"></div>
          <div class="loader-overlay" id="fxFLoad"><div class="spinner-rgb"></div></div>
          <div class="fx-resize" title="Ändra storlek"></div>
        </div>
      </section>
      
      <div class="fx-empty" id="fxEmpty" hidden>Inga övningar i denna sektion ännu.</div>
    </div>
  <script src="js/utils.js"></script>
  <script src="js/drag-within.js"></script>
  <script src="js/markdown.js"></script>
  <!-- Provide requestAIReply/routeMessageFrom so full-screen can talk to coworkers -->
  <script src="js/connect.js"></script>
  <script src="js/bubble-effect.js"></script>
    <script src="js/exercises-full.js"></script>
  </body>
  </html>
