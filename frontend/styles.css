/* Visual-only subset copied from main styles to keep exact design */
:root{
  --bg:#0b0b0d; --panel:#131317; --muted:#101016; --text:#e6e6ec; --subtle:#a6a6b3; --primary:#7c5cff; --accent:#00d4ff;
  --glass: rgba(255,255,255,0.04);
  --glass-border: rgba(255,255,255,0.08);
  --shadow: 0 10px 34px rgba(0,0,0,0.55);
}
*{box-sizing:border-box}
html,body,#app{height:100%}
body{margin:0;background:radial-gradient(1200px 800px at 80% -20%,rgba(124,92,255,.15),transparent),linear-gradient(180deg,#0b0b0d 0%, #0b0b0d 100%);color:var(--text);font:14px/1.5 Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}

/* Dark scrollbars (Firefox + WebKit) */
*{ scrollbar-width: thin; scrollbar-color: #3a3a45 #0f0f14 }
*::-webkit-scrollbar{ width:10px; height:10px }
*::-webkit-scrollbar-track{ background:#0f0f14; border-radius:8px }
*::-webkit-scrollbar-thumb{ background:linear-gradient(180deg,#23232b,#2a2a35); border-radius:8px; border:1px solid #2f2f3a }
*::-webkit-scrollbar-thumb:hover{ background:linear-gradient(180deg,#2a2a35,#353544) }

/* Node Board */
#nodeBoard{position:relative;width:100%;z-index:1500;padding:14px 16px 6px 16px;backdrop-filter:blur(2px);height:auto;overflow:visible}
#nodeBoard .nb-sections{display:grid;grid-template-columns:repeat(3,minmax(280px,1fr));gap:14px;padding-right:6px}
#nodeBoard .nb-sec{position:relative;border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:8px 8px 12px;background:rgba(0,0,0,0.25)}
#nodeBoard .nb-title{position:relative;z-index:1100;font-weight:600;letter-spacing:.2px;margin:2px 0 8px 4px}
#nodeBoard .nb-grid{position:relative;height:320px;min-height:320px;background-image:linear-gradient(to right, rgba(255,255,255,0.05) 1px, transparent 1px),linear-gradient(to bottom, rgba(255,255,255,0.05) 1px, transparent 1px);background-size:24px 100%, 100% 24px;border-radius:8px}
#nodeBoard .nb-grid::after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.12) 15%, rgba(255,255,255,0.12) 85%, transparent 100%);border-bottom-left-radius:8px;border-bottom-right-radius:8px;pointer-events:none}

.layout{overflow:auto;padding:0 10px 96px}
.content{padding:8px 0 96px}
.panel{position:relative;z-index:2000;border:1px solid #23232b;background:linear-gradient(180deg,#121219,#0e0e14);border-radius:12px;box-shadow:var(--shadow);margin-bottom:10px}
.panel .head{display:flex;align-items:baseline;gap:10px;padding:10px 72px 10px 12px;border-bottom:1px solid #23232b;position:relative}
.panel .head h2{margin:0;font-size:16px}
.panel .body{padding:12px}
.grid{display:grid;grid-template-columns:1.1fr 1fr;gap:12px}
@media (max-width:1100px){.grid{grid-template-columns:1fr}}

/* Exercises focus split view (Övningsblock) */
.panel.board-section .ex-left,
.panel.board-section .ex-right{
  position:relative;
  border:1px solid #23232b;
  border-radius:8px;
  padding:8px;
  background:linear-gradient(180deg,#121219,#0e0e14);
  min-height:320px; /* like article note area */
  display:flex;
  flex-direction:column;
}
.panel.board-section .ex-nav{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.panel.board-section .ex-q-focus{
  /* Keep a consistent viewport-based height so content scrolls instead of resizing the panel */
  height:40vh; max-height:50vh;
  flex:none; min-height:0; overflow:auto; outline:none; white-space:pre-wrap; line-height:1.5; font-size:14px; color:#e6e6ec;
  background:transparent; border:1px dashed #2a2a35; border-radius:8px; padding:8px;
}
/* Normalize markdown inside question so size doesn’t jump between items */
.panel.board-section .ex-q-focus h1,
.panel.board-section .ex-q-focus h2,
.panel.board-section .ex-q-focus h3,
.panel.board-section .ex-q-focus h4,
.panel.board-section .ex-q-focus h5,
.panel.board-section .ex-q-focus h6{ font-size:1em; line-height:inherit; margin:0.5em 0 0.4em; font-weight:600 }
.panel.board-section .ex-q-focus p{ margin:0.4em 0; font-size:inherit; line-height:inherit }
.panel.board-section .ex-q-focus ul,
.panel.board-section .ex-q-focus ol{ margin:0.4em 0 0.4em 1.2em }
.panel.board-section .ex-q-focus li{ margin:0.25em 0 }
.panel.board-section .ex-a-focus{
  flex:1; min-height:0; resize:vertical; width:100%; color:#e6e6ec;
  background:#0f0f14; border:1px solid #24242c; border-radius:10px; padding:10px;
}
.panel.board-section .ex-actions{display:flex;justify-content:space-between;gap:8px;margin-top:8px}
.panel.board-section .ex-fb{
  flex:1; min-height:0; resize:vertical; width:100%; color:#e6e6ec; margin-top:8px;
  background:#0f0f14; border:1px solid #24242c; border-radius:10px; padding:10px; white-space:pre-wrap; overflow:auto;
  /* Limit height so panel doesn’t keep growing; allow internal scroll */
  max-height:50vh; height:40vh; /* fixed viewport-based height to ensure scroll */
}
/* Feedback round header + delete button (applies to panel and full-screen) */
.panel.board-section .ex-fb .fb-head, .fx-fb .fb-head, .fb-head{display:flex; align-items:center; justify-content:space-between; gap:8px}
/* Enhanced, modern icon button */
.panel.board-section .ex-fb .fb-del, .fx-fb .fb-del, .fb-del{
  appearance:none; background:rgba(255,255,255,0.03); border:1px solid #2a2a35; color:#cfd3e3;
  width:22px; height:22px; border-radius:999px; display:inline-grid; place-items:center; line-height:1;
  cursor:pointer; opacity:0.9; transition:background .15s ease, border-color .15s ease, transform .12s ease, box-shadow .15s ease, color .15s ease;
}
.panel.board-section .ex-fb .fb-del:hover, .fx-fb .fb-del:hover, .fb-del:hover{
  background:rgba(255,80,80,0.12); border-color:#673232; color:#ffd3d3; transform:scale(1.06);
  box-shadow:0 0 0 2px rgba(255,80,80,0.08), 0 6px 16px rgba(255,80,80,0.12);
}
.panel.board-section .ex-fb .fb-del:active, .fx-fb .fb-del:active, .fb-del:active{ transform:scale(0.96); }
.panel.board-section .ex-fb .fb-del:focus-visible, .fx-fb .fb-del:focus-visible, .fb-del:focus-visible{
  outline:none; box-shadow:0 0 0 2px rgba(124,92,255,0.35), 0 2px 10px rgba(124,92,255,0.2);
}
 .fx-card#cardF{ display:flex; flex-direction:column }
 .fx-card#cardF .fx-fb{ flex:1 1 auto; min-height:0; overflow:auto; max-height:58vh; height:58vh; }

/* Full-screen round dropdown: ensure it opens downward and stays visible */
#fxRoundWrap{ position:relative }
#fxRoundMenu{ position:absolute; left:auto; right:0; top:36px; bottom:auto; }

/* Full-screen: normalize markdown in question card as well */
.fx-q h1,
.fx-q h2,
.fx-q h3,
.fx-q h4,
.fx-q h5,
.fx-q h6{ font-size:1em; line-height:inherit; margin:0.5em 0 0.4em; font-weight:600 }
.fx-q p{ margin:0.4em 0; font-size:inherit; line-height:inherit }
.fx-q ul,
.fx-q ol{ margin:0.4em 0 0.4em 1.2em }
.fx-q li{ margin:0.25em 0 }

/* Full-screen Question: dark edit state like feedback panels */
.fx-q[contenteditable="true"]{
  background:#0f0f14;
  border:1px solid #24242c;
  border-radius:10px;
  padding:8px;
  color:var(--text);
}
.fx-q[contenteditable="true"]:focus{
  outline:2px solid rgba(124,92,255,0.35);
  outline-offset:0;
  border-color:#3a3a45;
}
/* Don’t navigate links while editing; keep text selectable */
.fx-q[contenteditable="true"] a{ pointer-events:none; }

/* Full-screen Teori: dark edit state and link suppression in edit mode */
.fx-t[contenteditable="true"]{
  background:#0f0f14;
  border:1px solid #24242c;
  border-radius:10px;
  padding:8px;
  color:var(--text);
}
.fx-t[contenteditable="true"]:focus{
  outline:2px solid rgba(124,92,255,0.35);
  outline-offset:0;
  border-color:#3a3a45;
}
.fx-t[contenteditable="true"] a{ pointer-events:none; }

/* Full-screen question mini-chat: dark theme input */
.fx-qchat .input,
.fx-qchat input[type="text"],
.fx-qchat input{ background:#0f0f14; border:1px solid #24242c; color:var(--text); border-radius:10px; padding:8px 10px; }
.fx-qchat .input::placeholder,
.fx-qchat input::placeholder{ color:#8f93a3 }
.fx-qchat .input:focus,
.fx-qchat input:focus{ outline:2px solid rgba(124,92,255,0.35); outline-offset:0; border-color:#3a3a45 }

/* Section IO points: position left for output, right for input */
.panel .head .section-io{position:absolute;top:50%;transform:translateY(-50%);display:inline-block;width:12px;height:12px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #fff, #cde, #79f);z-index:9050;cursor:crosshair}
.panel .head .section-io[data-io="in"]{right:12px;border:2px solid #22c55e;box-shadow:0 0 8px rgba(34,197,94,0.6)}
.panel .head .section-io[data-io="out"]{right:36px;border:2px solid #8b5cf6;box-shadow:0 0 8px rgba(139,92,246,0.6)}
.panel .head .section-io.hover{border-color:#00d4ff;box-shadow:0 0 10px rgba(0,212,255,0.6)}
.panel .head .section-io[data-io="in"]:hover::after{content:'Input'; position:absolute; top:-26px; left:50%; transform:translateX(-50%); background:linear-gradient(180deg,#14141a,#0f0f13); border:1px solid #2a2a35; color:#cfd3e3; font-size:11px; padding:3px 6px; border-radius:6px; white-space:nowrap; pointer-events:none; box-shadow:0 8px 20px rgba(0,0,0,0.45); z-index:9100}
.panel .head .section-io[data-io="out"]:hover::after{content:'Output'; position:absolute; top:-26px; left:50%; transform:translateX(-50%); background:linear-gradient(180deg,#14141a,#0f0f13); border:1px solid #2a2a35; color:#cfd3e3; font-size:11px; padding:3px 6px; border-radius:6px; white-space:nowrap; pointer-events:none; box-shadow:0 8px 20px rgba(0,0,0,0.45); z-index:9100}

/* Section IO Board */
#sectionIoBoard{position:relative; z-index:1800; padding:10px 16px; margin:6px 18px; border:1px solid #23232b; border-radius:12px; background:linear-gradient(180deg,#121219,#0e0e14); box-shadow:var(--shadow)}
#sectionIoBoard .sib-head{display:flex; align-items:center; justify-content:space-between; padding:8px 6px 6px}
#sectionIoBoard .sib-head h2{margin:0; font-size:14px; color:#cfd3e3; letter-spacing:.2px}
#sectionIoBoard .sib-list{display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:10px}
#sectionIoBoard .sib-item{border:1px solid #23232b; border-radius:10px; background:linear-gradient(180deg,#111118,#0d0d13)}
#sectionIoBoard .sib-item .head{padding:8px 54px 8px 10px}
#sectionIoBoard .sib-item .sib-title{margin:0; font-size:13px; color:#e6e6ec}
#sectionIoBoard .sib-item .conn-point{top:50%; transform:translateY(-50%)}
#sectionIoBoard .sib-item .conn-point.io-out{right:36px}
#sectionIoBoard .sib-item .conn-point.io-in{right:12px}

/* Buttons */
.btn{background:var(--glass);backdrop-filter:blur(6px);border:1px solid var(--glass-border);color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer}
.copilot-plus{position:fixed;left:50%;top:12px;transform:translateX(-50%);z-index:7000;width:40px;height:40px;border-radius:999px;border:1px dashed #2a2a35;background:#0f0f14;color:#cfd3e3;box-shadow:var(--shadow);cursor:pointer}
.copilot-plus:hover{border-color:#3a3a45}

/* Add-node dropdown wrapper/menu */
.copilot-plus-wrap{position:fixed;left:50%;top:12px;transform:translateX(-50%);z-index:7050}
/* Ensure the button inside wrapper is positioned relative to wrapper for menu placement */
.copilot-plus-wrap .copilot-plus{position:static;transform:none}
.add-menu{position:absolute;top:46px;left:50%;transform:translateX(-50%);display:grid;gap:6px;min-width:180px;padding:6px;background:linear-gradient(180deg,#121219,#0e0e14);border:1px solid #23232b;border-radius:10px;box-shadow:0 12px 28px rgba(0,0,0,0.55);z-index:7060}
.add-menu.hidden{display:none}
.add-menu button{appearance:none;background:rgba(255,255,255,0.03);border:1px solid #2a2a35;color:#e6e6ec;padding:8px 10px;border-radius:8px;text-align:left;cursor:pointer}
.add-menu button:hover{background:rgba(124,92,255,0.08);border-color:#3a3a45}
/* Generic hidden helper (used elsewhere too) */
.hidden{display:none !important}

/* FAB icons (User, CoWorker, Internet) */
.fab{position:absolute;z-index:9000;border-radius:999px;padding:10px 12px;min-width:48px;min-height:48px;background:linear-gradient(135deg,#14141a,#111116);color:var(--text);border:1px solid #23232b;box-shadow:var(--shadow);cursor:grab;display:inline-flex;align-items:center;justify-content:center;user-select:none;touch-action:none}
.fab *{pointer-events:none}
.fab .conn-point{pointer-events:auto}
.fab:active{cursor:grabbing}
.fab .hex-mini{width:20px;height:20px;display:block;filter:drop-shadow(0 2px 8px rgba(124,92,255,0.25))}
.fab-label{position:absolute;left:50%;top:-28px;transform:translateX(-50%);white-space:nowrap;padding:4px 8px;border-radius:8px;background:linear-gradient(180deg, rgba(124,92,255,0.06), rgba(0,212,255,0.03));color:#eaf6ff;font-weight:600;font-size:12px;box-shadow:0 6px 20px rgba(0,212,255,0.06);text-shadow:0 2px 10px rgba(124,92,255,0.18);pointer-events:none}
.globe-grid{display:block;filter:drop-shadow(0 0 10px rgba(0,212,255,0.25)) drop-shadow(0 0 20px rgba(124,92,255,0.18))}
.hex-avatar{position:relative;width:20px;height:20px;display:grid;place-items:center}
.hex-avatar svg{width:100%;height:100%;display:block;margin:auto;filter:drop-shadow(0 4px 14px rgba(124,92,255,0.25))}
.user-dot{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#0ea5e9,#34d399)}
.icon-btn{background:transparent;border:0;color:#a6a6b3;cursor:pointer}
.btn.btn-ghost{background:transparent;border:1px solid #2a2a35;color:#cfd3e3;padding:6px 10px;border-radius:8px}
.btn.danger{background:linear-gradient(135deg,#7c0000,#b01818);border:0;color:#fff;padding:6px 12px;border-radius:8px}
.brand{font-weight:700;letter-spacing:.5px;opacity:.9}
.drawer-head .brand{display:flex;align-items:center;gap:8px}
.note{color:#a6a6b3}
/* Editable section note UX */
.panel .body .note[contenteditable="true"]{min-height:160px;padding:8px;border:1px dashed #2a2a35;border-radius:8px}
.panel .body .note[contenteditable="true"]:focus{outline:1px solid #2a2a35;border-color:#3a3a45}
/* Hide note when in exercises mode */
.panel.board-section[data-mode="exercises"] .note{display:none !important}

/* Glow/busy */
.fab.busy{box-shadow:0 0 0 2px rgba(124,92,255,0.75),0 0 22px rgba(124,92,255,0.35),0 0 44px rgba(0,212,255,0.25);border-color:rgba(124,92,255,0.6);animation:glowPulse 1.2s ease-in-out infinite}
/* Dragging state uses a distinct outline so it won't interfere with busy glow */
.fab.dragging{outline:2px dashed rgba(124,92,255,0.5); outline-offset:2px}
@keyframes glowPulse{0%{box-shadow:0 0 0 2px rgba(124,92,255,0.65),0 0 18px rgba(124,92,255,0.28),0 0 36px rgba(0,212,255,0.2)}50%{box-shadow:0 0 0 2px rgba(124,92,255,0.9),0 0 30px rgba(124,92,255,0.45),0 0 60px rgba(0,212,255,0.35)}100%{box-shadow:0 0 0 2px rgba(124,92,255,0.65),0 0 18px rgba(124,92,255,0.28),0 0 36px rgba(0,212,255,0.2)}}

/* Connection layer */
svg#connLayer{position:fixed;inset:0;width:100vw;height:100vh;pointer-events:none;z-index:9500}

/* Conn points on fabs and panels */
.conn-point{position:absolute;width:10px;height:10px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #fff, #cde, #79f);border:2px solid #4a79ff;box-shadow:0 0 6px rgba(74,121,255,0.35);transform:translate(-50%, -50%);cursor:crosshair;z-index:10}
.conn-point.io-in{border-color:#22c55e;box-shadow:0 0 8px rgba(34,197,94,0.6)}
.conn-point.io-out{border-color:#8b5cf6;box-shadow:0 0 8px rgba(139,92,246,0.6)}
.conn-point.hover{border-color:#00d4ff;box-shadow:0 0 10px rgba(0,212,255,0.6)}
.conn-point:hover::after{
  position:absolute; top:-26px; left:50%; transform:translateX(-50%);
  background:linear-gradient(180deg,#14141a,#0f0f13);
  border:1px solid #2a2a35; color:#cfd3e3; font-size:11px;
  padding:3px 6px; border-radius:6px; white-space:nowrap; pointer-events:none;
  box-shadow:0 8px 20px rgba(0,0,0,0.45); z-index:7700;
}
.conn-point.io-in:hover::after{ content:'Input'; }
.conn-point.io-out:hover::after{ content:'Output'; }

/* Flyout chat panel (visual only) */
.panel-flyout{position:fixed;z-index:11020;max-width:96vw;max-height:92vh;display:flex;flex-direction:column;background:linear-gradient(180deg,var(--panel),#0f0f13);border:1px solid #23232b;border-radius:12px;box-shadow:0 18px 48px rgba(0,0,0,0.6);opacity:0;transform:scale(.85);transition:opacity .22s ease, transform .22s cubic-bezier(.18,.7,.2,1.02);pointer-events:none}
.panel-flyout{min-width:280px;min-height:200px}
.panel-flyout.show{opacity:1;transform:scale(1);pointer-events:auto}
.panel-flyout .drawer-head{display:flex;align-items:center;gap:10px;padding:12px;border-bottom:1px solid #23232b;cursor:move}
.panel-flyout .messages{padding:14px;overflow:auto;flex:1}
.panel-flyout .composer{display:flex;gap:8px;padding:14px;background:linear-gradient(180deg,#0f0f13,#0c0c10);border-top:1px solid #23232b;border-bottom-left-radius:12px;border-bottom-right-radius:12px}
.user-node-panel .messages,.user-node-panel .composer{font-family:var(--user-font, inherit)}
.panel-flyout .settings{display:grid;grid-template-columns:1fr;gap:10px;padding:12px;border-bottom:1px solid #23232b;background:linear-gradient(180deg,#101017,#0d0d13);max-height:calc(100% - 180px);overflow:auto}
.panel-flyout .settings.collapsed{display:none}
.panel-flyout label{display:flex;flex-direction:column;gap:6px;font-size:12px;color:#cfd3e3}
.panel-flyout label.inline{flex-direction:row;align-items:center;gap:8px}
.panel-flyout .color-field{display:flex;align-items:center;gap:10px}
.panel-flyout .color-toggle{width:22px;height:22px;border-radius:6px;border:1px solid #2a2a35;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.25);background:#7c5cff}
.panel-flyout .color-panel{position:relative}
.panel-flyout .color-panel input[type="color"]{width:34px;height:26px;border:1px solid #2a2a35;border-radius:6px;padding:0;background:#0f0f14}
.panel-flyout .color-panel.collapsed{display:none}
.panel-flyout select,.panel-flyout input[type="text"],.panel-flyout input[type="password"],.panel-flyout input[type="number"],.panel-flyout textarea{background:#0f0f14;border:1px solid #24242c;border-radius:10px;color:#e6e6ec;padding:8px 10px}
.panel-flyout input[type="range"]{width:100%}
.panel-flyout fieldset.subsec{border:1px dashed #2a2a35;border-radius:10px;padding:8px 10px}
.panel-flyout fieldset.subsec legend{padding:0 6px;color:#aab}
.badge{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border-radius:999px;border:1px solid #2a2a35;background:rgba(255,255,255,0.04);color:#dfe3f3;font-size:11px}
.badge-error{border-color:#673232;background:rgba(255,80,80,0.08);color:#ffd3d3}
.subtle{color:#9aa3b2;font-size:11px}
.attachments{display:flex;flex-direction:column;gap:6px;padding:6px 12px;border-top:1px dashed #2a2a35;background:rgba(255,255,255,0.02)}
.attachments.hidden{display:none}
.attachments .att-toggle{background:transparent;border:1px solid #2a2a35;color:#cfd3e3;border-radius:999px;padding:2px 8px;font-size:11px;margin-right:auto}
.att-content{display:flex;flex-wrap:wrap;gap:6px;max-height:120px;overflow-y:auto;overflow-x:hidden}
.att-content.collapsed{max-height:0; padding-top:0; padding-bottom:0; overflow:hidden}
.attachment-chip{display:inline-flex;align-items:center;gap:6px;border:1px solid #2a2a35;border-radius:999px;padding:2px 6px;font-size:11px;line-height:1.2}
.attachment-chip .name{max-width:clamp(120px, 30vw, 300px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.attachment-chip .rm{background:transparent;border:0;color:#a6a6b3;cursor:pointer}
.userInput{flex:1;background:#0f0f14;border:1px solid #24242c;border-radius:12px;padding:10px 12px;color:var(--text);resize:none;min-height:40px;max-height:300px;overflow:hidden}
.send-btn{background:linear-gradient(135deg,var(--primary),#5b38ff);border:0;border-radius:999px;color:white;padding:0 16px;cursor:pointer;align-self:flex-end;margin-bottom:6px}
.bubble{max-width:78%;min-width:150px;min-height:44px;padding:10px 12px;border-radius:16px;margin:8px 0;background:rgba(255,255,255,0.01);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.08);box-shadow:0 10px 26px rgba(0,0,0,0.35)}
.bubble.user{margin-left:auto;background:rgba(124,92,255,0.02);border-color:rgba(124,92,255,0.22)}
/* Author label above each bubble, aligned with the bubble side */
.panel-flyout .author-label{font-size:12px;color:var(--subtle);margin:0 0 2px 0;padding:0}
/* Message grouping and alignment */
.message-row{display:flex;flex-direction:column}
.message-row.user{align-items:flex-end}
.message-row:not(.user){align-items:flex-start}
/* Ensure author aligns to bubble left by using a fit-content group */
.msg-group{display:flex;flex-direction:column;align-items:flex-start;max-width:78%}
.message-row.user .msg-group{align-items:flex-end}

/* Resize handles */
.flyout-resize{position:absolute;width:14px;height:14px}
.flyout-resize.br{right:6px;bottom:6px;cursor:nwse-resize;background:linear-gradient(135deg,transparent 50%, rgba(124,92,255,.4) 50%);clip-path:polygon(0 100%, 100% 0, 100% 100%);opacity:.6}
.flyout-resize.br:hover{opacity:1}
.flyout-resize.t{top:-2px;left:0;right:0;height:6px;width:auto;cursor:ns-resize;background:transparent}
.flyout-resize.b{bottom:-2px;left:0;right:0;height:6px;width:auto;cursor:ns-resize;background:transparent}
.flyout-resize.l{left:-2px;top:0;bottom:0;width:6px;height:auto;cursor:ew-resize;background:transparent}
.flyout-resize.r{right:-2px;top:0;bottom:0;width:6px;height:auto;cursor:ew-resize;background:transparent}

/* Internet hub style */
.internet-hub{width:48px;height:48px;border-radius:50%;display:grid;place-items:center}
.internet-hub .globe{width:26px;height:26px;filter:drop-shadow(0 2px 10px rgba(124,92,255,0.35))}
.internet-hub.active{box-shadow:0 0 0 2px rgba(0,212,255,0.8), 0 0 36px rgba(0,212,255,0.35)}

/* User Node sizing and label offset */
.user-node.fab{width:56px;height:56px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;background:var(--panel);box-shadow:0 6px 18px rgba(0,0,0,0.25)}
.user-avatar{font-size:22px;line-height:1}

/* Readability boosts for main content */
.panel.board-section .body{gap:14px}
.panel.board-section .note{min-height:200px;line-height:1.5;font-size:15px}
.panel.board-section .ex-nav{gap:8px}
.panel.board-section .ex-q-focus{font-size:15px}
.panel.board-section .ex-a-focus{min-height:260px}
.panel.board-section .ex-fb{min-height:140px}

/* Section toolbar selects (dark theme for Välj nod etc.) */
.panel.board-section .head select.btn{
  background:#0f0f14;
  border:1px solid #24242c;
  color:#e6e6ec;
  border-radius:10px;
  padding:6px 10px;
  min-height:30px;
}
.panel.board-section .head select.btn:focus{
  outline:2px solid rgba(124,92,255,0.35);
  outline-offset:0;
  border-color:#3a3a45;
}
.panel.board-section .head select.btn option{
  background:#0f0f14;
  color:#e6e6ec;
}
/* Ensure render-mode select in head is also dark if present */
.panel.board-section .head select[data-role="secRenderMode"]{
  background:#0f0f14;
  border:1px solid #24242c;
  color:#e6e6ec;
  border-radius:10px;
  padding:6px 10px;
  min-height:30px;
}
.panel.board-section .head select[data-role="secRenderMode"]:focus{
  outline:2px solid rgba(124,92,255,0.35);
  border-color:#3a3a45;
}
.panel.board-section .head select[data-role="secRenderMode"] option{
  background:#0f0f14;
  color:#e6e6ec;
}

/* Loading overlay + RGB spinner (dark theme) */
.loader-overlay{position:absolute;inset:0;display:none;place-items:center;/* keep subtle dim */background:rgba(7,7,11,0.28);border-radius:10px;z-index:100}
.loader-overlay.show{display:grid}
.spinner-rgb{width:64px;height:64px;border-radius:50%;
  background:conic-gradient(from 0deg,#7c5cff, #00d4ff, #7c5cff);
  -webkit-mask:radial-gradient(farthest-side, transparent 60%, #000 61%);
          mask:radial-gradient(farthest-side, transparent 60%, #000 61%);
  box-shadow:0 0 24px rgba(124,92,255,0.25), 0 0 36px rgba(0,212,255,0.18);
  animation:spin 1.1s linear infinite, hue 4s linear infinite;
}
.spinner-rgb::before{content:"";position:absolute;inset:12px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%, rgba(124,92,255,.25), transparent 60%);
  filter:blur(6px);
}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes hue{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}

/* Tiny inline spinner for chat meta (tool running) */
.inline-spinner{
  display:inline-block; width:12px; height:12px; margin-right:6px; vertical-align:-1px;
  border-radius:50%; border:2px solid rgba(124,92,255,0.85);
  border-top-color: transparent; border-right-color: transparent;
  animation: spin 0.8s linear infinite;
  box-shadow:0 0 6px rgba(124,92,255,0.25);
}
